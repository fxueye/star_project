{"version":3,"sources":["Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\src","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Player extends cc.Component {\r\n\r\n    @property\r\n    jumpHeight:number = 0;\r\n    @property\r\n    jumoDuration:number = 0;\r\n    @property \r\n    maxMoveSpeed:number = 0;\r\n    @property\r\n    accel:number = 0;\r\n    @property(cc.AudioClip)\r\n    jumpAudio:cc.AudioClip = null;\r\n\r\n    private _accLeft:boolean = false;\r\n    private _accRight:boolean = false;\r\n    private _xSpeed:number = 0;\r\n    // LIFE-CYCLE CALLBACKS:\r\n    setJumpAction(){\r\n        var jumpUp = cc.moveBy(this.jumoDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCircleActionOut());\r\n        var jumpDown = cc.moveBy(this.jumoDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n        var callback = cc.callFunc(this.playJumpSound,this);\r\n        return cc.repeatForever(cc.sequence(jumpUp,jumpDown,callback));\r\n    }\r\n    playJumpSound(){\r\n        cc.audioEngine.playEffect(this.jumpAudio,false);\r\n    }\r\n    onKeyDown(evt){\r\n        switch(evt.keyCode){\r\n            case cc.macro.KEY.a:\r\n                this._accLeft = true;\r\n            break;\r\n            case cc.macro.KEY.d:\r\n                this._accRight = true;\r\n            break;\r\n        }\r\n    }\r\n    onKeyUp(evt){\r\n        switch(evt.keyCode){\r\n            case cc.macro.KEY.a:\r\n                this._accLeft = false;\r\n            break;\r\n            case cc.macro.KEY.d:\r\n                this._accRight = false;\r\n            break;\r\n        }\r\n    }\r\n    onLoad () {\r\n        this.node.runAction(this.setJumpAction());\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n    }\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n\r\n    update (dt) {\r\n        if(this._accLeft){\r\n            this._xSpeed -= this.accel * dt;\r\n        }else if(this._accRight){\r\n            this._xSpeed += this.accel * dt;\r\n        }\r\n        if(Math.abs(this._xSpeed) > this.maxMoveSpeed){\r\n            this._xSpeed = this.maxMoveSpeed * this._xSpeed / Math.abs(this._xSpeed);\r\n        }\r\n        console.log(\"width2:\" + cc.view.getVisibleSize().width);\r\n        console.log(\"height2:\" + cc.view.getCanvasSize().height);\r\n        this.node.x += this._xSpeed * dt;\r\n        if(this.node.x > cc.view.getVisibleSize().width / 2){\r\n            this.node.x = -cc.view.getVisibleSize().width / 2;\r\n        }\r\n        if(this.node.x < -cc.view.getVisibleSize().width / 2){\r\n            this.node.x = cc.view.getVisibleSize().width / 2;\r\n        }\r\n    }\r\n}\r\n"]}