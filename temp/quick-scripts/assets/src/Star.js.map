{"version":3,"sources":["Star.ts"],"names":[],"mappings":";;;;;AAEA,oBAAoB;AACpB,iFAAiF;AACjF,yFAAyF;AACzF,mBAAmB;AACnB,2FAA2F;AAC3F,mGAAmG;AACnG,8BAA8B;AAC9B,2FAA2F;AAC3F,mGAAmG;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAkC,wBAAY;IAD9C;QAAA,qEAkCC;QA9BG,gBAAU,GAAU,CAAC,CAAC;QACtB,wBAAwB;QACjB,UAAI,GAAQ,IAAI,CAAC;;IA4B5B,CAAC;IA1BG,eAAe;IAEf,oBAAK,GAAL;IAEA,CAAC;IAED,gCAAiB,GAAjB;QACI,IAAI,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;QAC/C,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,CAAC;QACnD,OAAO,IAAI,CAAC;IAChB,CAAC;IACD,uBAAQ,GAAR;QACI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QACxB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;IACxB,CAAC;IAED,qBAAM,GAAN,UAAQ,EAAE;QACN,IAAG,IAAI,CAAC,iBAAiB,EAAE,GAAG,IAAI,CAAC,UAAU,EAAC;YAC1C,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAO;SACV;QACD,IAAI,YAAY,GAAG,CAAC,GAAE,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;QAC/D,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,CAAC,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC;IACnF,CAAC;IA7BD;QADC,QAAQ;4CACa;IAHL,IAAI;QADxB,OAAO;OACa,IAAI,CAiCxB;IAAD,WAAC;CAjCD,AAiCC,CAjCiC,EAAE,CAAC,SAAS,GAiC7C;kBAjCoB,IAAI","file":"","sourceRoot":"..\\..\\..\\..\\assets\\src","sourcesContent":["import Game from \"./Game\";\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Star extends cc.Component {\r\n\r\n    @property\r\n    pickRadius:number = 0;\r\n    // LIFE-CYCLE CALLBACKS:\r\n    public game:Game = null;\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    getPlayerDistance(){\r\n        var playerPos = this.game.player.getPosition();\r\n        var dist = this.node.position.sub(playerPos).mag();\r\n        return dist;\r\n    }\r\n    onPicked(){\r\n        this.game.spawNewStar();\r\n        this.game.gainScore();\r\n        this.node.destroy();\r\n    }\r\n\r\n    update (dt) {\r\n        if(this.getPlayerDistance() < this.pickRadius){\r\n            this.onPicked();\r\n            return;\r\n        }\r\n        var opacityRatio = 1- this.game.Timer / this.game.StarDuration;\r\n        var minOpacity = 50;\r\n        this.node.opacity = minOpacity + Math.floor(opacityRatio * (255 - minOpacity));\r\n    }\r\n}\r\n"]}